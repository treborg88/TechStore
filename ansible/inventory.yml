# =============================================================================
# Ansible Inventory — TechStore (Multi-Instance)
# =============================================================================
# Define all target servers grouped by environment.
#
# Usage:
#   # Deploy all environments
#   ansible-playbook -i ansible/inventory.yml ansible/playbook.yml --tags deploy
#
#   # Deploy only production
#   ansible-playbook -i ansible/inventory.yml ansible/playbook.yml --tags deploy --limit production
#
#   # Deploy only staging
#   ansible-playbook -i ansible/inventory.yml ansible/playbook.yml --tags deploy --limit staging
#
#   # Ping all servers
#   ansible all -i ansible/inventory.yml -m ping
#
# SSH key must be configured:
#   cp /mnt/c/Users/Robert/Downloads/ssh-key-2025-10-23.key ~/.ssh/oracle_key
#   chmod 600 ~/.ssh/oracle_key
# =============================================================================

all:
  # ── Variables globales (aplican a todos los hosts) ──────
  vars:
    ansible_ssh_private_key_file: ~/.ssh/oracle_key
    ansible_python_interpreter: /usr/bin/python3

  children:
    # ── PRODUCCIÓN ────────────────────────────────────────
    production:
      hosts:
        prod-1:
          ansible_host: 143.47.118.165
          ansible_user: ubuntu
          ansible_ssh_private_key_file: ~/.ssh/oracle_key
          domain: eonsclover.com
          ssl_mode: full_strict
          app_branch: main
        # ── GCP — leds.eonsclover.com ────────────────────────
        prod-2:
          ansible_host: 35.192.57.192
          ansible_user: ubuntu
          ansible_ssh_private_key_file: ~/.ssh/gcp_prod2
          domain: leds.eonsclover.com
          ssl_mode: full_strict
          app_branch: main

    # ── STAGING (descomenta cuando tengas un server de staging) ─
    # staging:
    #   hosts:
    #     staging-1:
    #       ansible_host: 10.0.0.50
    #       ansible_user: ubuntu
    #       domain: staging.eonsclover.com
    #       ssl_mode: flexible        # Sin SSL propio en staging
    #       app_branch: develop       # Branch de desarrollo

    # ── DESARROLLO LOCAL (VM o contenedor) ─────────────────
    # dev:
    #   hosts:
    #     dev-local:
    #       ansible_host: 192.168.1.100
    #       ansible_user: ubuntu
    #       domain: localhost
    #       ssl_mode: flexible
    #       app_branch: develop
    #       ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
